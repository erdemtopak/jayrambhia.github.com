<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head >
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Point Cloud Library - Install and Configure - Ubuntu 12.04 &mdash; Aniket Pant</title>
        <meta name="author" content="">
        <meta name="description" content="">
        <meta name="keywords" content="jay, rambhia, computer vision, python, trakcing, keypoints, c, c++, simplecv, opencv">
        <meta name="viewport" content="width=device-width">

        
        

        <!-- stylesheets -->
        <link rel="stylesheet" href="/assets/styles/css/style.min.css">
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div class="header-container gw">
            <div class="g one-whole zen-space full-width"></div>
            <div class="wrapper">
                <header class="g one-whole flexbox" role="banner">
                    <h1 class="g one-third portable-one-whole flexbox__item"><a class="logo media" href="/" rel="nofollow"><img class="media__item" src="/assets/images/logo.jpg" alt="Rawrrr! Aniket here." /></a></h1>
                    <nav class="g two-thirds portable-one-whole flexbox__item navbar">
                        <ul class="nav nav--block portable-nav--stacked">
                            <li><a href="/">Home</a></li>
                            <li><a href="/about-me">About Me</a></li>
                            <li><a href="/Blog">Blog</a></li>
                            <li><a href="/archive">Archive</a></li>
                        </ul>
                    </nav>
                    <div class="g two-thirds portable-one-whole flexbox__item">
                        <p class="islet about-me">I'm <strong>Aniket</strong>. I love to code, listen to music and I even write free-verses at times. A majority of my work is <em>writing syntax for design</em>.</p>
                    </div>
                    <p rel="google-authorship" class="accessibility">By Aniket Pant</p>
                </header> <!-- header -->
            </div>
        </div> <!-- header-container -->

        <div class="main-container gw">
            <div class="wrapper">
                <section class="g one-whole" role="main">
                <div class="post point-cloud-library-install-and-configure-ubuntu-12-04">
	<header class="g one-quarter portable-one-whole post--header">
  		<h1 class="post_title">Point Cloud Library - Install and Configure - Ubuntu 12.04</h1>
  		<div class="meta"><date class="date">Posted on 17 January 2013</date><br/>Under <span class="category">Blog</a><br/>Tagged </span><span class="tags">Computer Vision</span></div>
      <div class="share island">
        <a href="https://twitter.com/share" class="twitter-share-button" data-via="jayrambhia" data-related="jayrambhia">Tweet</a>
        <div class="g-plusone" data-size="medium"></div>
        <div class="fb-like" data-send="false" data-layout="button_count" data-width="450" data-show-faces="true"></div>
      </div>
      <div id="boastful"></div>
	</header><!-- post-header -->
	<div class="g three-quarters portable-one-whole">
		<article class="post--content">
	  	<p>A <strong>Point Cloud</strong> is a set of vertices in a three-dimensional coordinate system. As OpenCV is used to work with two dimensional objects(images), PCL is used to work with three dimensional objects(3D space). Vertices usually represent X, Y and Z coordinates of the external surface of an object.</p>

<p><strong><a href="http://pointclouds.org/">Point Cloud Library</a></strong> is a comprehensive BSD open source library for n-D Point Clouds and 3D geometry processing. It has great <a href="http://pointclouds.org/documentation/">documentation</a> and <a href="http://dev.pointclouds.org/projects/pcl/wiki">developer support</a>.</p>

<h2 id="install-pcl"><strong>Install PCL</strong>:</h2>

<p>I tried to install PCL using apt-get but there were some issues with it. First of all, it was 1.0.6 version(which is very old). Second, I couldn’t find any .pc file for pkg-config and last but not the least, it wasn’t included anywhere. So I asked my friend, <a href="http://salilkapur.wordpress.com/">Salil</a>, who has worked with PCL before and he gave me the best solution.</p>

<pre><code>sudo add-apt-repository ppa:v-launchpad-jochen-sprickerhof-de/pcl
sudo apt-get update
sudo apt-get install libpcl-all
</code></pre>

<p>That’s it. Add ppa and install it. Now I have the latest version of PCL and I didn’t need to worry about all the dependencies especially libboost. I somehow broke it. So moving on to configuring PCL and compiling PCL code.</p>

<h2 id="compile-pcl"><strong>Compile PCL</strong>:</h2>

<p>I am not a big fan of cmake/make and despise it a lot. I like to compile codes using gcc or g++. </p>

<h3 id="cmake"><strong>Cmake</strong>:</h3>

<p>If you want to write CMakeLists.txt and compile your code using cmake, here is how to do it.
Copy the <a href="http://pointclouds.org/documentation/tutorials/writing_pcd.php#writing-pcd">code</a> and save it as pcd_write.cpp in a folder.
In the same folder, create a file named CmakeLists.txt and copy the following.</p>

<pre><code>cmake_minimum_required(VERSION 2.6 FATAL_ERROR)
find_package(PCL 1.6 REQUIRED)
include_directories(${PCL_INCLUDE_DIRS})
link_directories(${PCL_LIBRARY_DIRS})
add_definitions(${PCL_DEFINITIONS})
add_executable(pcd_write pcd_write.cpp)
target_link_libraries(pcd_write ${PCL_COMMON_LIBRARIES} ${PCL_IO_LIBRARIES})
</code></pre>

<p>Now compile it using cmake.</p>

<pre><code>cmake .
make
</code></pre>

<p><strong>$ ./pcd_write</strong></p>

<p>Now, moving on to my favorite part. Compiling it using gcc/g++.</p>

<h3 id="gccg"><strong>gcc/g++</strong>:</h3>

<p>As I know how many files I need to include to compile OpenCV code, I always take precautions and use <strong>pkg-config</strong>. It’s a life saver. Here’s my thing. I write a bash script to compile code, save it, use an alias to call it every time I want to compile a code. I have done it for OpenCV. See <a href="http://jayrambhia.wordpress.com/2012/05/08/beginning-opencv/">Beginning OpenCV</a>.</p>

<p>I did the same for PCL. Except this time, it took me more time to find all the files as unlike OpenCV, PCL doesn’t keep all the files intact. Each module is separate. Here’s the file. Name it <strong>.compile_pcl.sh</strong> and save it in your home directory.</p>

<pre><code>echo "compiling $1"
if [[ $1 == *.c ]]
then
    gcc -ggdb -I/usr/include/pcl-1.6 -I/usr/include/eigen3 -o `basename $1 .c` $1 `pkg-config --libs pcl_apps-1.6 pcl_common-1.6 pcl_features-1.6 pcl_filters-1.6 pcl_geometry-1.6 pcl_io-1.6 pcl_kdtree-1.6 pcl_keypoints-1.6 pcl_octree-1.6 pcl_registration-1.6 pcl_sample_consensus-1.6 pcl_search-1.6 pcl_segmentation-1.6 pcl_surface-1.6 pcl_tracking-1.6 pcl_visualization-1.6 flann`;
elif [[ $1 == *.cpp ]]
then
    g++ -ggdb -I/usr/include/pcl-1.6 -I/usr/include/eigen3 -o `basename $1 .cpp` $1 `pkg-config --libs pcl_apps-1.6 pcl_common-1.6 pcl_features-1.6 pcl_filters-1.6 pcl_geometry-1.6 pcl_io-1.6 pcl_kdtree-1.6 pcl_keypoints-1.6 pcl_octree-1.6 pcl_registration-1.6 pcl_sample_consensus-1.6 pcl_search-1.6 pcl_segmentation-1.6 pcl_surface-1.6 pcl_tracking-1.6 pcl_visualization-1.6 flann`;
else
    echo "Please compile only .c or .cpp files"
fi
echo "Output file =&gt; ${1%.*}"
</code></pre>

<p>Did you get what I was saying? I had to include each package separately. 
Give execution permission with
<strong>$ chmod +x .compile_pcl.sh</strong>
Add following line in your <strong>.bash_aliases</strong> (which will be in your home directory. If you don’t have one, make one)</p>

<pre><code>alias pcl="~/.compile_pcl.sh"
</code></pre>

<p>Now, compile that code using your new alias.
<strong>$ pcl pcd_write.cpp</strong>
<strong>$ ./pcd_write</strong></p>

<p>If for some reasons, you get an error saying 
<strong>/usr/bin/ld: cannot find -lflann_cpp-gd</strong>,</p>

<p>Edit <strong>/usr/lib/pkgconfig/flann.pc</strong> in superuser mode and remove <strong>-lflann_cpp-gd</strong>. This will work perfectly.</p>

<p>Well, now you don’t need to write crappy CMakeLists.txt files everytime and use cmake and make and stuff. Start looking into some tutorials.</p>

<p>P.S. Diving into 3D visualization and tracking.</p>

  
		</article><!-- post-content -->
		<footer class="post--footer"></footer><!-- post-footer -->
    <section class="meta--info island">
      <p class="lead">
        <br/><br/>If you liked this post, then you should definitely follow Jay on twitter too. He would be excited to know that you like his work.
      </p>
      <a href="https://twitter.com/jayrambhia" class="twitter-follow-button" data-show-count="false">Follow @jayrambhia</a>
    </section>
  </div>
</div><!-- post -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script src="/assets/js/jquery.boastful.js"></script>
<script src="/assets/js/rainbow-custom.min.js"></script>

<script type="text/javascript">
  $(document).ready(function() {
    $('#boastful').boastful({
        empty_message: '<p>Bah! Why ain\'t anyone tweeting this.</p>'  
    });
  });
</script>
                </section>
            </div>
        </div> <!-- main-container -->

        <div class="footer-container gw">
            <div class="wrapper">
                <footer class="g one-whole text--center" role="contentinfo">
                    <a href="https://plus.google.com/114828599949215633124?rel=author" class="accessibility">Google +</a>
                    <p><a href="http://twitter.com/aniket_pant">@jayrambhia</a><span class="subtle">&nbsp;|&nbsp;Paranoid Android&nbsp;&nbsp;</span> 
                </footer> <!-- footer -->
            </div>
            <div class="g one-whole zen-space full-width"></div>
        </div> <!-- footer-container -->

        <script type="text/javascript">

          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-23477947-1']);
          _gaq.push(['_trackPageview']);

          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();

        </script>

        <!-- Typekit Fonts -->
        <script type="text/javascript">
          (function() {
            var config = {
              kitId: 'rsd5dqz',
              scriptTimeout: 3000
            };
            var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
          })();

          (function(doc, script) {
            var js, 
                fjs = doc.getElementsByTagName(script)[0],
                frag = doc.createDocumentFragment(),
                add = function(url, id) {
                    if (doc.getElementById(id)) {return;}
                    js = doc.createElement(script);
                    js.src = url;
                    id && (js.id = id);
                    frag.appendChild( js );
                };
                
              // Google+ button
              add('http://apis.google.com/js/plusone.js');
              // Facebook SDK
              add('//connect.facebook.net/en_US/all.js#xfbml=1&appId=465363156848461', 'facebook-jssdk');
              // Twitter SDK
              add('//platform.twitter.com/widgets.js');

              fjs.parentNode.insertBefore(frag, fjs);
          }(document, 'script'));
        </script>

    </body>
</html>
